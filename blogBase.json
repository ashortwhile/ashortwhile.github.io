{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "ashortwhile\u7684\u535a\u5ba2", "subTitle": "\u6211\u662fashortwhile....", "avatarUrl": "https://avatars.githubusercontent.com/u/178870129?v=4", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/di-yi-ci-xie-bo-ke.html", "labels": ["\u65e5\u5e38"], "postTitle": "\u7b2c\u4e00\u6b21\u5199\u535a\u5ba2", "postUrl": "post/di-yi-ci-xie-bo-ke.html", "postSourceUrl": "https://github.com/ashortwhile/ashortwhile.github.io/issues/1", "commentNum": 0, "wordCount": 17, "description": "\u7b2c\u4e00\u6b21\u5199\u535a\u5ba2\uff0c\u5e0c\u671b\u80fd\u575a\u6301\u4e0b\u53bb\uff01\uff01\uff01\u3002", "top": 0, "createdAt": 1756116831, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/178870129?v=4", "createdDate": "2025-08-25", "dateLabelColor": "#0969da"}, "P2": {"htmlDir": "docs/post/Godot-zhuang-tai-ji.html", "labels": ["Godot"], "postTitle": "Godot\u72b6\u6001\u673a", "postUrl": "post/Godot-zhuang-tai-ji.html", "postSourceUrl": "https://github.com/ashortwhile/ashortwhile.github.io/issues/2", "commentNum": 0, "wordCount": 2852, "description": "# Godot\u72b6\u6001\u673a\n\n<img width='253' height='114' alt='Image' src='https://github.com/user-attachments/assets/ec8c03af-ab88-400c-9beb-bfe4bba5a1b2' />\n\n## \u4e00\u3001 StateMachine\n```\nextends Node\nclass_name StateMachine\n\n@export var initial_state : NodePath\n@export var auto_start = true\n\nvar current_state : StateBase = null\n\n@onready var states = get_children()\nfunc _ready() -> void:\n\tif auto_start:\n\t\tlaunch()\n\n\nfunc launch():\n\t\tassert(initial_state != null,'\u9519\u8bef')\n\t\tcurrent_state = get_node(initial_state)\n\t\tcurrent_state.enter()\n\n\nfunc _physics_process(delta: float) -> void:\n\tcurrent_state.physics_update(delta)\n\n\nfunc _process(delta: float) -> void:\n\tcurrent_state.update(delta)\n\n\nfunc has_state(state_name):\n\tfor s in states:\n\t\tif 'state_name' in s and s.state_name == state_name:\n\t\t\treturn true\n\treturn false\n\n\nfunc get_state(state_name):\n\tfor s in states:\n\t\tif 'state_name' in s and s.state_name == state_name:\n\t\t\treturn s\n\treturn null\n\n\nfunc transition_to(state_name : String,msg : Dictionary = {}):\n\tif has_state(state_name):\n\t\tvar state = get_state(state_name)\n\t\tif state:\n\t\t\tcurrent_state = state\n\t\t\tcurrent_state.enter(msg)\n```\n## \u4e8c\u3001 StateBase\n```\nextends Node\nclass_name StateBase\nvar state_name = 'StateBase'\nfunc enter(_msg : Dictionary = {}):\n\tpass\n\t\nfunc exit():\n\tpass\n\t\nfunc update(_delta : float):\n\tpass\n\nfunc physics_update(_delta : float):\n\tpass\n```\n## \u4e09\u3001player\u811a\u672c\n```\nextends CharacterBody2D\nclass_name Player\n@export var player : Player\nvar current_direction = 'down'\n```\n## \u56db\u3001\u89d2\u8272\u7a7a\u95f2\u811a\u672c\n```\nextends StateBase\n@export var player: Player\n@export var animatedsprite2d: AnimatedSprite2D\n@export var statemachine: StateMachine\nfunc _ready():\n\tstate_name = 'idle'\n\t\t\nfunc enter(_msg : Dictionary = {}):\n\tpass\n\t\nfunc update(_delta : float):\n\tanimatedsprite2d.play(player.current_direction + '_idle')\n\tif Input.get_vector('left','right','up','down'):\n\t\tstatemachine.transition_to('move')\n\nfunc physics_update(_delta : float):\n\tpass\n\t\nfunc exit():\n\tanimatedsprite2d.stop()\n```\n## \u4e94\u3001\u89d2\u8272\u79fb\u52a8\u811a\u672c\n```\nextends StateBase\n@export var player: Player\n@export var animatedsprite2d: AnimatedSprite2D\n@export var statemachine: StateMachine\n@export var SPEED = 100\nfunc _ready():\n\tstate_name = 'move'\n\nfunc enter(_msg : Dictionary = {}):\n\tpass\n\t\nfunc update(_delta : float):\n\tanimatedsprite2d.play(player.current_direction + '_move')\n\tif !Input.get_vector('left','right','up','down'):\n\t\tstatemachine.transition_to('idle')\n\nfunc physics_update(_delta : float):\n\tvar input = Input.get_vector('left', 'right', 'up', 'down')\n\tif input != Vector2.ZERO:\n\t\tif abs(input.x) > abs(input.y):\n\t\t\tplayer.current_direction = 'right' if input.x > 0 else 'left'\n\t\telse:\n\t\t\tplayer.current_direction = 'down' if input.y > 0 else 'up'\n\t\tplayer.velocity = input.normalized() * SPEED\n\t\tplayer.move_and_slide()\n\nfunc exit():\n\tanimatedsprite2d.stop()\n```\n\u72b6\u6001\u673a\u80fd\u591f\u5f88\u597d\u7684\u5bf9\u89d2\u8272\u7684\u72b6\u6001\u8fdb\u884c\u8c03\u6574\uff0c\u4f7f\u5236\u4f5c\u8005\u80fd\u591f\u8fc5\u901f\u6709\u6548\u7684\u5236\u4f5c\u591a\u72b6\u6001\u7684\u89d2\u8272\u3002", "top": 0, "createdAt": 1756121258, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/178870129?v=4", "createdDate": "2025-08-25", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"Godot": "#18515f", "\u65e5\u5e38": "#cbf492"}, "displayTitle": "ashortwhile\u7684\u535a\u5ba2", "faviconUrl": "https://avatars.githubusercontent.com/u/178870129?v=4", "ogImage": "https://avatars.githubusercontent.com/u/178870129?v=4", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://ashortwhile.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}